<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>Random dadjoke from file</title>
		<link rel="stylesheet" href="style.css" />
		<script data-require="jquery" data-semver="2.1.1" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script>
			var lines;
			var randomNumber;
			var lastRandomNumber;
				$(document.body).ready(function () {
				$.ajax({
					url: 'dadjokes.txt'
				}).done(function(content) {
				lines = content.replace(/\r\n|\r/g, '\n').trim().split('\n');
				if (lines && lines.length) {
					$('#showLine').ready( function() {
						while (randomNumber === lastRandomNumber) {
							randomNumber = parseInt(Math.random() * lines.length);
							if (lines.length === 1) { break; }
					}
					lastRandomNumber = randomNumber;
						$('#dadjoke').text(lines[randomNumber]);
						});
					}
				});
			});
		</script>

	</head>

	<body>
		<p id="dadjoke"></p>
	</body>

</html>